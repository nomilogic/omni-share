{"version":3,"file":"InviteShare-DARQZ-9Y.js","sources":["../../src/components/InviteShare.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { createRoot } from \"react-dom/client\";\r\nimport { Copy, Share2, X } from \"lucide-react\";\r\nimport { notify } from \"@/utils/toast\";\r\n\r\ntype InviteOpts = {\r\n  title?: string;\r\n  description?: string;\r\n};\r\n\r\nconst InviteModal: React.FC<{\r\n  link: string;\r\n  opts?: InviteOpts;\r\n  onClose: () => void;\r\n}> = ({ link, opts, onClose }) => {\r\n  const [copied, setCopied] = useState(false);\r\n\r\n  useEffect(() => {\r\n    function onKey(e: KeyboardEvent) {\r\n      if (e.key === \"Escape\") onClose();\r\n    }\r\n    window.addEventListener(\"keydown\", onKey);\r\n    return () => window.removeEventListener(\"keydown\", onKey);\r\n  }, [onClose]);\r\n\r\n  const copy = async () => {\r\n    try {\r\n      await navigator.clipboard.writeText(link);\r\n      setCopied(true);\r\n      setTimeout(() => setCopied(false), 2000);\r\n    } catch (err) {\r\n      console.error(\"copy failed\", err);\r\n    }\r\n  };\r\n\r\n  const share = async () => {\r\n    if ((navigator as any).share) {\r\n      try {\r\n        await (navigator as any).share({\r\n          title: opts?.title || \"Invite\",\r\n          text: opts?.description || \"Join me on OmniShare\",\r\n          url: link,\r\n        });\r\n      } catch (err) {\r\n        console.error(\"share failed\", err);\r\n      }\r\n    } else {\r\n      // fallback to copy\r\n      copy();\r\n      notify(\r\n        \"error\",\r\n        \"Share API not supported in this browser â€” link copied to clipboard\"\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center\">\r\n      <div className=\"absolute inset-0 bg-black/50\" onClick={onClose} />\r\n      <div className=\"relative w-full max-w-md mx-4 bg-white rounded-md shadow-md p-6\">\r\n        <div className=\"flex items-start justify-between mb-4\">\r\n          <div>\r\n            <h3 className=\"text-lg font-semibold\">\r\n              {opts?.title || \"Invite a friend\"}\r\n            </h3>\r\n            <p className=\"text-sm text-gray-500 font-medium\">\r\n              {opts?.description || \"Share this link to invite others\"}\r\n            </p>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            aria-label=\"Close\"\r\n            className=\"p-1 text-gray-500 font-medium hover:text-slate-800\"\r\n          >\r\n            <X className=\"w-5 h-5\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-xs text-gray-500 font-medium mb-2\">\r\n            Invite link\r\n          </label>\r\n          <div className=\"flex items-center gap-2\">\r\n            <input\r\n              readOnly\r\n              value={link}\r\n              className=\"flex-1 px-3 py-2.5 border rounded bg-gray-50\"\r\n            />\r\n            <button\r\n              onClick={copy}\r\n              title=\"Copy link\"\r\n              className=\"px-2 py-2.5 bg-gray-100 rounded\"\r\n            >\r\n              <Copy className=\"w-4 h-4\" />\r\n            </button>\r\n          </div>\r\n          {copied && <div className=\"text-xs text-green-600 mt-2\">Copied!</div>}\r\n        </div>\r\n\r\n        <div className=\"flex items-center justify-end gap-2\">\r\n          <button\r\n            onClick={share}\r\n            className=\"flex items-center gap-2 px-4 py-2.5 bg-purple-600 text-white rounded\"\r\n          >\r\n            <Share2 className=\"w-4 h-4\" />\r\n            Share\r\n          </button>\r\n          <button onClick={onClose} className=\"px-4 py-2.5 border rounded\">\r\n            Close\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// programmatic opener\r\nexport function openInviteModal(link: string, opts?: InviteOpts) {\r\n  const container = document.createElement(\"div\");\r\n  document.body.appendChild(container);\r\n  const root = createRoot(container);\r\n\r\n  function cleanup() {\r\n    setTimeout(() => {\r\n      try {\r\n        root.unmount();\r\n        container.remove();\r\n      } catch (e) {\r\n        console.error(e);\r\n      }\r\n    }, 200);\r\n  }\r\n\r\n  root.render(<InviteModal link={link} opts={opts} onClose={cleanup} />);\r\n}\r\n\r\nexport default InviteModal;\r\n"],"names":["InviteModal","link","opts","onClose","copied","setCopied","useState","useEffect","onKey","e","copy","err","share","notify","jsxs","jsx","X","Copy","Share2","openInviteModal","container","root","createRoot","cleanup"],"mappings":"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"}